generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model categoria {
  id         Int      @id @default(autoincrement())
  descricao  String
  produto_final produto_final?  
  materia_prima materia_prima[]     
}

model produto_final {
  id             Int      @id @default(autoincrement())
  descricao      String
  unidade_medida String
  categoriaId    Int      @unique 
  categoria      categoria @relation(fields: [categoriaId], references: [id])
}

model materia_prima {
  id             Int       @id @default(autoincrement())
  descricao      String
  unidade_medida String
  preco_custo    Int
  Images String
  categoriaId    Int?
  categoria      categoria? @relation(fields: [categoriaId], references: [id])  
}

model lote_materia {
  id         Int      @id @default(autoincrement())
  numero  Int
  quantidade_inicial Int
  quantidade_atual  Int
  data_entrada DateTime     @default(now()) @db.Timestamp(6)
  fornecedor  String
  localId     Int           @unique 
  local       local         @relation(fields: [localId], references: [id])
}

model local {
  id         Int      @id @default(autoincrement())
  descricao String
  lote_materia lote_materia?
}

//deixei status como String por enquanto
model ordem {
  id         Int      @id @default(autoincrement())
  status String 
  numero Int
  data_ordem DateTime     @default(now()) @db.Timestamp(6)
  quantidade_esperada Int
}

model etapa {
  id         Int      @id @default(autoincrement())
  descricao String
}

//deixei status como String por enquanto
model etapa_ordem {
  status String
  quantidade_inicial Int
  quantidade_final Int
}

model ocorrencia {
  id         Int      @id @default(autoincrement())
  titulo String
  texto String
  data_ocorrencia DateTime     @default(now()) @db.Timestamp(6)
  Imagem String
}

model lote_produto {
  id         Int      @id @default(autoincrement())
  numero Int
  quantidade Int
  Imagem String
}

model usuario {
  id         Int      @id @default(autoincrement())
  nome String
  senha String
}
